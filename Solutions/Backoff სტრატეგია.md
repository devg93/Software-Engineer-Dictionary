рЃФрЃљрЃџрЃўрЃљрЃю рЃЎрЃљрЃарЃњрЃў рЃЎрЃўрЃЌрЃ«рЃЋрЃљ ­ЪњА  
**Backoff рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃљ** Рђћ рЃћрЃА рЃљрЃарЃўрЃА рЃбрЃћрЃЦрЃюрЃўрЃЎрЃљ, рЃарЃЮрЃЏрЃћрЃџрЃАрЃљрЃф рЃўрЃДрЃћрЃюрЃћрЃЉрЃћрЃю _retry рЃЏрЃћрЃЦрЃљрЃюрЃўрЃќрЃЏрЃћрЃЉрЃерЃў_, рЃарЃЮрЃфрЃљ рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃљ рЃЋрЃћрЃа рЃАрЃарЃБрЃџрЃЊрЃћрЃЉрЃљ (рЃЏрЃљрЃњ. рЃЦрЃАрЃћрЃџрЃўрЃА рЃљрЃю рЃњрЃљрЃарЃћ рЃАрЃћрЃарЃЋрЃўрЃАрЃўрЃА рЃерЃћрЃфрЃЊрЃЮрЃЏрЃўрЃА рЃњрЃљрЃЏрЃЮ).

рЃЏрЃЮрЃЎрЃџрЃћрЃЊ ­ЪЉЄ

---

## РџЎ№ИЈ **Backoff Strategy Рђћ рЃњрЃљрЃюрЃЏрЃљрЃарЃбрЃћрЃЉрЃљ**

рЃћрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА, рЃарЃЮрЃЏ **рЃДрЃЮрЃЋрЃћрЃџрЃў рЃ«рЃћрЃџрЃљрЃ«рЃљрЃџрЃў рЃфрЃЊрЃљ (retry)** рЃљрЃа рЃЎрЃћрЃЌрЃЊрЃћрЃЉрЃљ рЃЏрЃДрЃўрЃАрЃўрЃћрЃарЃљрЃЊ,  
рЃљрЃарЃљрЃЏрЃћрЃЊ **рЃЊрЃарЃЮрЃўрЃА рЃњрЃљрЃќрЃарЃЊрЃўрЃџрЃў рЃерЃБрЃљрЃџрЃћрЃЊрЃћрЃЉрЃўрЃЌ** Рђћ рЃарЃљрЃЌрЃљ рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃЏ рЃљрЃа рЃњрЃљрЃЊрЃљрЃўрЃбрЃЋрЃўрЃарЃЌрЃЮрЃА рЃЊрЃљ рЃњрЃљрЃарЃћ рЃАрЃћрЃарЃЋрЃўрЃАрЃЏрЃљ рЃЏрЃЮрЃљрЃАрЃгрЃарЃЮрЃА рЃљрЃдрЃЊрЃњрЃћрЃюрЃљ.

рЃљрЃюрЃБ:

> РђърЃЌрЃБ рЃарЃљрЃдрЃљрЃф рЃЋрЃћрЃа рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃЊрЃљ рЃљрЃ«рЃџрЃљ Рђћ рЃЊрЃљрЃЋрЃўрЃфрЃљрЃЊрЃЮрЃЌ рЃфрЃЮрЃбрЃљ, рЃЊрЃљ рЃерЃћрЃЏрЃЊрЃћрЃњ рЃЋрЃфрЃљрЃЊрЃЮрЃЌ рЃўрЃАрЃћрЃЋ, рЃБрЃцрЃарЃЮ рЃЊрЃўрЃЊрЃў рЃърЃљрЃБрЃќрЃўрЃЌ.Рђю

---

## ­ЪћЂ **рЃарЃљрЃбрЃЮрЃЏ рЃњрЃЋрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ**

рЃЌрЃБ рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ рЃБрЃЉрЃарЃљрЃџрЃЮрЃЊ рЃљрЃЎрЃћрЃЌрЃћрЃЉрЃА Рђюretry-рЃА рЃДрЃЮрЃЋрЃћрЃџ рЃгрЃљрЃЏрЃерЃўРђЮ, рЃЏрЃљрЃерЃўрЃю:

- рЃерЃћрЃБрЃФрЃџрЃўрЃљ рЃЊрЃљрЃљрЃгрЃЋрЃћрЃА рЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ рЃњрЃљрЃарЃћ рЃАрЃћрЃарЃЋрЃўрЃАрЃќрЃћ,
    
- рЃБрЃцрЃарЃЮ рЃњрЃљрЃБрЃљрЃарЃћрЃАрЃЮрЃА network рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљ,
    
- рЃљрЃю рЃерЃћрЃЦрЃЏрЃюрЃљрЃА Рђюretry stormРђЮ (рЃДрЃЋрЃћрЃџрЃљ instance рЃћрЃарЃЌрЃљрЃЊ рЃфрЃЊрЃўрЃџрЃЮрЃЉрЃА resend-рЃА).
    

­ЪЉЅ рЃљрЃЏрЃўрЃбрЃЮрЃЏ рЃЋрЃўрЃДрЃћрЃюрЃћрЃЉрЃЌ _backoff-рЃА_ Рђћ рЃърЃљрЃБрЃќрЃљ рЃўрЃќрЃарЃЊрЃћрЃЉрЃљ рЃДрЃЮрЃЋрЃћрЃџ рЃЏрЃфрЃЊрЃћрЃџрЃЮрЃЉрЃљрЃќрЃћ.

---

## ­ЪЊѕ **рЃбрЃўрЃърЃћрЃЉрЃў**

|рЃбрЃўрЃърЃў|рЃљрЃдрЃгрЃћрЃарЃљ|рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў (рЃърЃљрЃБрЃќрЃћрЃЉрЃў рЃгрЃљрЃЏрЃћрЃЉрЃерЃў)|
|---|---|---|
|**Fixed Backoff**|рЃцрЃўрЃЦрЃАрЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃърЃљрЃБрЃќрЃљ рЃДрЃЮрЃЋрЃћрЃџрЃў рЃфрЃЊрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ|5, 5, 5, 5|
|**Linear Backoff**|рЃърЃљрЃБрЃќрЃљ рЃўрЃќрЃарЃЊрЃћрЃЉрЃљ рЃ«рЃљрЃќрЃЮрЃЋрЃюрЃљрЃЊ|2, 4, 6, 8|
|**Exponential Backoff**|рЃърЃљрЃБрЃќрЃљ рЃЮрЃарЃЏрЃљрЃњрЃЊрЃћрЃЉрЃљ рЃДрЃЮрЃЋрЃћрЃџ рЃ»рЃћрЃарЃќрЃћ|1, 2, 4, 8, 16|
|**Exponential + Jitter**|рЃЮрЃарЃЏрЃљрЃњрЃЊрЃћрЃЉрЃљ, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃўрЃЌрЃў рЃфрЃЋрЃљрЃџрЃћрЃЉрЃљрЃЊрЃЮрЃЉрЃўрЃЌ, рЃарЃЮрЃЏ рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃљрЃЋрЃўрЃфрЃўрЃџрЃЮрЃЌ рЃћрЃарЃЌрЃЊрЃарЃЮрЃБрЃџрЃў рЃфрЃЊрЃћрЃЉрЃў|1.1, 1.9, 3.8, 7.2, 15.1|

---

## ­ЪДЕ **рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў рЃерЃћрЃюрЃў RecoveryJobUser-рЃўрЃА рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃерЃў**

рЃерЃћрЃю рЃњрЃљрЃЦрЃЋрЃА рЃЏрЃљрЃарЃбрЃўрЃЋрЃў _linear backoff_:

```csharp
await Task.Delay(TimeSpan.FromSeconds(5 * attempt));
```

рЃћрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА:

- 1-рЃџрЃў рЃфрЃЊрЃљ Рєњ рЃърЃљрЃБрЃќрЃљ 5 рЃгрЃљрЃЏрЃў
    
- 2-рЃћ рЃфрЃЊрЃљ Рєњ 10 рЃгрЃљрЃЏрЃў
    
- 3-рЃћ рЃфрЃЊрЃљ Рєњ 15 рЃгрЃљрЃЏрЃў
    

­ЪЉЅ рЃарЃљрЃф рЃФрЃљрЃџрЃўрЃљрЃю рЃЎрЃљрЃарЃњрЃўрЃљ Рђћ рЃЏрЃљрЃарЃбрЃўрЃЋрЃў, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃћрЃцрЃћрЃЦрЃбрЃБрЃарЃў retry рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃљрЃљ.

---

## ­ЪДа **рЃърЃарЃЮрЃцрЃћрЃАрЃўрЃЮрЃюрЃљрЃџрЃБрЃарЃў рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў (Polly Exponential Backoff)**

```csharp
var retryPolicy = Policy
    .Handle<Exception>()
    .WaitAndRetryAsync(
        retryCount: 5,
        sleepDurationProvider: attempt =>
            TimeSpan.FromSeconds(Math.Pow(2, attempt)) + 
            TimeSpan.FromMilliseconds(Random.Shared.Next(0, 500)),
        onRetry: (ex, ts, retry, ctx) =>
        {
            _logger.LogWarning(ex, "Retry {Retry} after {Delay}", retry, ts);
        });
```

рЃерЃћрЃЊрЃћрЃњрЃљрЃЊ рЃЏрЃўрЃўрЃдрЃћрЃЉ:

```
Retry 1 Рєњ 2 рЃгрЃљрЃЏрЃў
Retry 2 Рєњ 4 рЃгрЃљрЃЏрЃў
Retry 3 Рєњ 8 рЃгрЃљрЃЏрЃў
Retry 4 Рєњ 16 рЃгрЃљрЃЏрЃў
Retry 5 Рєњ 32 рЃгрЃљрЃЏрЃў
```

­ЪЉЅ рЃЊрЃљ рЃљрЃЏрЃљрЃА рЃћрЃЏрЃљрЃбрЃћрЃЉрЃљ рЃЏрЃфрЃўрЃарЃћ random jitter, рЃарЃЮрЃЏ рЃДрЃЋрЃћрЃџрЃљ instance рЃћрЃарЃЌрЃЊрЃарЃЮрЃБрЃџрЃљрЃЊ рЃљрЃа рЃАрЃфрЃљрЃЊрЃЮрЃА рЃўрЃАрЃћрЃЋ.

---

## ­ЪДЙ **рЃерЃћрЃ»рЃљрЃЏрЃћрЃЉрЃљ**

|рЃЌрЃЋрЃўрЃАрЃћрЃЉрЃљ|рЃљрЃдрЃгрЃћрЃарЃљ|
|---|---|
|**Backoff**|Retry рЃфрЃЊрЃћрЃЉрЃА рЃерЃЮрЃарЃўрЃА рЃърЃљрЃБрЃќрЃўрЃА рЃАрЃбрЃарЃљрЃбрЃћрЃњрЃўрЃљ|
|**рЃЏрЃўрЃќрЃљрЃюрЃў**|рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю рЃљрЃўрЃфрЃўрЃџрЃЮрЃА рЃЊрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ рЃЊрЃљ рЃЊрЃљрЃћрЃџрЃЮрЃЊрЃЮрЃА рЃљрЃдрЃЊрЃњрЃћрЃюрЃљрЃА|
|**рЃбрЃўрЃърЃћрЃЉрЃў**|Fixed, Linear, Exponential, Exponential + Jitter|
|**рЃАрЃљрЃЊ рЃњрЃљрЃЏрЃЮрЃўрЃДрЃћрЃюрЃћрЃЉрЃљ**|RetryPolicies, CircuitBreakers, API calls, Message Brokers, Recovery Jobs|

---
