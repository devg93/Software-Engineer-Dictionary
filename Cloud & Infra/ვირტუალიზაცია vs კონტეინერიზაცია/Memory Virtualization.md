рЃАрЃгрЃЮрЃарЃљрЃЊ рЃЏрЃўрЃЊрЃўрЃ«рЃљрЃа ­ЪћЦ  
рЃљрЃ«рЃџрЃљ рЃњрЃљрЃюрЃЋрЃўрЃ«рЃўрЃџрЃЮрЃЌ рЃЏрЃћрЃЮрЃарЃћ рЃЎрЃарЃўрЃбрЃўрЃЎрЃБрЃџрЃў рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃў Рђћ **Memory Virtualization**, рЃљрЃюрЃБ рЃарЃЮрЃњрЃЮрЃа рЃўрЃДрЃЮрЃцрЃљ рЃЊрЃљ рЃўрЃЏрЃљрЃарЃЌрЃћрЃЉрЃљ RAM рЃ░рЃўрЃърЃћрЃарЃЋрЃўрЃќрЃЮрЃарЃўрЃА рЃЊрЃЮрЃюрЃћрЃќрЃћ.  
рЃЌрЃБ CPU-рЃА рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў РђюрЃЊрЃарЃЮРђЮ рЃўрЃДрЃЮрЃцрЃљ, рЃљрЃЦ **рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљ** рЃўрЃќрЃўрЃљрЃарЃћрЃЉрЃљ рЃўрЃАрЃћ, рЃарЃЮрЃЏ рЃљрЃарЃф рЃћрЃарЃЌрЃў VM рЃЋрЃћрЃа рЃерЃћрЃћрЃ«рЃЮрЃА рЃЏрЃћрЃЮрЃарЃўрЃА рЃЉрЃљрЃўрЃбрЃћрЃЉрЃА.

---

## ­ЪДа 1№ИЈРЃБ рЃЏрЃўрЃќрЃљрЃюрЃў

рЃћрЃарЃЌ рЃцрЃўрЃќрЃўрЃЎрЃБрЃа рЃАрЃћрЃарЃЋрЃћрЃарЃќрЃћ рЃњрЃЋрЃљрЃЦрЃЋрЃА рЃћрЃарЃЌрЃў рЃцрЃўрЃќрЃўрЃЎрЃБрЃарЃў RAM (рЃЏрЃљрЃњ. 64 GB),  
рЃЏрЃљрЃњрЃарЃљрЃЏ рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ рЃњрЃљрЃерЃЋрЃћрЃЉрЃБрЃџрЃў рЃўрЃДрЃЮрЃА рЃарЃљрЃЏрЃЊрЃћрЃюрЃўрЃЏрЃћ VM, рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ:

|VM|рЃњрЃљрЃЏрЃЮрЃДрЃЮрЃцрЃўрЃџрЃў RAM|
|---|---|
|VM1|16 GB|
|VM2|8 GB|
|VM3|32 GB|
|VM4|16 GB|

рЃ»рЃљрЃЏрЃерЃў 72 GB Рђћ рЃљрЃюрЃБ **рЃЏрЃћрЃбрЃў, рЃЋрЃўрЃЊрЃарЃћ рЃарЃћрЃљрЃџрЃБрЃарЃљрЃЊ рЃњрЃЋрЃљрЃЦрЃЋрЃА.**

­ЪЉЅ рЃћрЃАрЃћрЃф **Overcommitment**, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃБрЃЎрЃЋрЃћ рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА рЃЊрЃЮрЃюрЃћрЃќрЃћ.  
рЃерЃћрЃўрЃФрЃџрЃћрЃЉрЃљ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃЊрЃћрЃА, рЃарЃљрЃЊрЃњрЃљрЃю VM-рЃћрЃЉрЃў рЃўрЃерЃЋрЃўрЃљрЃЌрЃљрЃЊ рЃўрЃДрЃћрЃюрЃћрЃЉрЃћрЃю рЃАрЃарЃБрЃџрЃљрЃЊ рЃњрЃљрЃЏрЃЮрЃДрЃЮрЃцрЃўрЃџ RAM-рЃА.

---

## РџЎ№ИЈ 2№ИЈРЃБ рЃарЃЮрЃњрЃЮрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА Рђћ Virtual Memory Mapping

рЃарЃЮрЃњрЃЮрЃарЃф VM-рЃћрЃЉрЃА рЃљрЃЦрЃЋрЃЌ рЃЋрЃўрЃарЃбрЃБрЃљрЃџрЃБрЃарЃў CPU,  
рЃљрЃАрЃћрЃЋрЃћ рЃЌрЃўрЃЌрЃЮ VM-рЃА рЃљрЃЦрЃЋрЃА рЃАрЃљрЃЎрЃБрЃЌрЃљрЃарЃў **рЃЋрЃўрЃарЃбрЃБрЃљрЃџрЃБрЃарЃў рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃЌрЃљ рЃАрЃўрЃЋрЃарЃфрЃћ.**

рЃ░рЃўрЃърЃћрЃарЃЋрЃўрЃќрЃЮрЃарЃў рЃљрЃЎрЃћрЃЌрЃћрЃЉрЃА **рЃЮрЃарЃћрЃБрЃџ рЃЌрЃљрЃарЃњрЃЏрЃюрЃљрЃА (double mapping):**

```
Guest Virtual Address (VM-рЃўрЃА рЃерЃўрЃњрЃюрЃўрЃЌ) 
   РєЊ
Guest Physical Address (VM рЃ«рЃћрЃЊрЃљрЃЋрЃА рЃЌрЃўрЃЌрЃЦрЃЮрЃА рЃарЃћрЃљрЃџрЃБрЃарЃўрЃљ)
   РєЊ
Host Physical Address (рЃарЃћрЃљрЃџрЃБрЃарЃў RAM-рЃќрЃћ рЃърЃЮрЃќрЃўрЃфрЃўрЃљ)
```

рЃћрЃА рЃюрЃўрЃерЃюрЃљрЃЋрЃА, рЃарЃЮрЃЏ VM рЃцрЃўрЃЦрЃарЃЮрЃЉрЃА рЃЌрЃўрЃЌрЃЦрЃЮрЃА рЃЌрЃљрЃЋрЃўрЃАрЃў 16 GB рЃцрЃўрЃќрЃўрЃЎрЃБрЃарЃў рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃљ рЃљрЃЦрЃЋрЃА,  
рЃЏрЃљрЃњрЃарЃљрЃЏ рЃАрЃўрЃюрЃљрЃЏрЃЊрЃЋрЃўрЃџрЃћрЃерЃў рЃўрЃА рЃБрЃЉрЃарЃљрЃџрЃЮрЃЊ **рЃ░рЃўрЃърЃћрЃарЃЋрЃўрЃќрЃЮрЃарЃўрЃА рЃЏрЃўрЃћрЃа рЃЏрЃћрЃюрЃћрЃ»рЃўрЃарЃћрЃЉрЃБрЃџрЃў рЃЉрЃџрЃЮрЃЎрЃћрЃЉрЃўрЃљ** рЃАрЃљрЃћрЃарЃЌрЃЮ RAM-рЃерЃў.

---

## ­Ъћ╣ 3№ИЈРЃБ рЃарЃЮрЃњрЃЮрЃа рЃўрЃфрЃљрЃЋрЃА рЃћрЃА рЃўрЃќрЃЮрЃџрЃљрЃфрЃўрЃљрЃА

рЃДрЃЋрЃћрЃџрЃљ VM-рЃА рЃљрЃЦрЃЋрЃА рЃЌрЃљрЃЋрЃўрЃАрЃў **Page Table** Рђћ  
рЃАрЃўрЃљ, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃБрЃЎрЃљрЃЋрЃерЃўрЃарЃћрЃЉрЃА рЃЋрЃўрЃарЃбрЃБрЃљрЃџрЃБрЃа рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃћрЃЉрЃА рЃарЃћрЃљрЃџрЃБрЃа рЃцрЃўрЃќрЃўрЃЎрЃБрЃа рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃћрЃЉрЃА.

рЃ░рЃўрЃърЃћрЃарЃЋрЃўрЃќрЃЮрЃарЃў рЃљрЃЏрЃљрЃА рЃцрЃљрЃарЃљрЃЋрЃА рЃЊрЃљ рЃЏрЃљрЃарЃЌрЃљрЃЋрЃА **Shadow Page Table-рЃўрЃЌ**  
рЃљрЃю рЃљрЃ«рЃљрЃџ рЃАрЃўрЃАрЃбрЃћрЃЏрЃћрЃЉрЃерЃў **EPT (Extended Page Tables, Intel VT-x)** рЃЏрЃћрЃЦрЃљрЃюрЃўрЃќрЃЏрЃўрЃЌ.

РъА№ИЈ рЃерЃћрЃЊрЃћрЃњрЃљрЃЊ:

- VM рЃЋрЃћрЃа рЃгрЃљрЃўрЃЎрЃўрЃЌрЃ«рЃљрЃЋрЃА рЃАрЃ«рЃЋрЃљ VM-рЃўрЃА RAM-рЃА
    
- Kernel рЃЊрЃЮрЃюрЃћрЃќрЃћрЃф рЃЎрЃў, рЃўрЃА рЃ«рЃћрЃЊрЃљрЃЋрЃА рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃЌрЃљрЃЋрЃўрЃА memory space-рЃА
    
- рЃцрЃўрЃќрЃўрЃЎрЃБрЃа RAM-рЃерЃў рЃАрЃ«рЃЋрЃљ VM-рЃўрЃА рЃЉрЃџрЃЮрЃЎрЃћрЃЉрЃў рЃЏрЃўрЃАрЃЌрЃЋрЃўрЃА РђърЃБрЃ«рЃўрЃџрЃљрЃЋрЃўрЃљРђю
    

---

## РџЎ№ИЈ 4№ИЈРЃБ рЃбрЃўрЃърЃўрЃБрЃарЃў Memory Virtualization рЃбрЃћрЃЦрЃюрЃўрЃЎрЃћрЃЉрЃў

### ­ЪДЕ A. **Shadow Page Tables (рЃФрЃЋрЃћрЃџрЃў рЃЏрЃћрЃЌрЃЮрЃЊрЃў)**

рЃ░рЃўрЃърЃћрЃарЃЋрЃўрЃќрЃЮрЃарЃў рЃљрЃЎрЃЮрЃърЃўрЃарЃћрЃЉрЃА рЃЌрЃўрЃЌрЃЮ VM-рЃўрЃА page table-рЃА рЃЊрЃљ рЃЏрЃљрЃарЃЌрЃљрЃЋрЃА РђюshadowРђЮ рЃЋрЃћрЃарЃАрЃўрЃљрЃА.  
рЃюрЃљрЃЎрЃџрЃЮрЃЋрЃљрЃюрЃў Рђћ рЃюрЃћрЃџрЃљ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃЊрЃљ context switch-рЃўрЃА рЃЊрЃарЃЮрЃА.

---

### ­ЪДЕ B. **EPT / NPT (рЃљрЃ«рЃљрЃџрЃў рЃЏрЃћрЃЌрЃЮрЃЊрЃў)**

Intel VT-x (EPT) рЃЊрЃљ AMD-V (NPT) hardware-рЃўрЃЌ рЃърЃўрЃарЃЊрЃљрЃърЃўрЃа рЃљрЃ«рЃЮрЃарЃфрЃўрЃћрЃџрЃћрЃЉрЃА рЃЮрЃарЃћрЃБрЃџ рЃЌрЃљрЃарЃњрЃЏрЃюрЃљрЃА.  
рЃћрЃА рЃБрЃЎрЃЋрЃћ hardware-assisted virtualization-рЃўрЃљ Рєњ рЃФрЃљрЃџрЃўрЃљрЃю рЃАрЃгрЃарЃљрЃцрЃў.

```
Guest Virtual Рєњ Guest Physical Рєњ Host Physical
```

CPU рЃБрЃЎрЃЋрЃћ рЃЌрЃЋрЃўрЃЌрЃЮрЃю рЃўрЃфрЃюрЃЮрЃЉрЃА рЃЮрЃарЃЏрЃљрЃњ mapping-рЃА Рђћ рЃ░рЃўрЃърЃћрЃарЃЋрЃўрЃќрЃЮрЃарЃА рЃљрЃдрЃљрЃа рЃБрЃгрЃћрЃЋрЃА рЃ«рЃћрЃџрЃўрЃЌ рЃЕрЃљрЃарЃћрЃЋрЃљ.

---

### ­ЪДЕ C. **Memory Ballooning**

рЃЌрЃБ рЃарЃЮрЃЏрЃћрЃџрЃўрЃЏрЃћ VM рЃарЃћрЃљрЃџрЃБрЃарЃљрЃЊ рЃюрЃљрЃЎрЃџрЃћрЃЉрЃА рЃўрЃДрЃћрЃюрЃћрЃЉрЃА,  
рЃ░рЃўрЃърЃћрЃарЃЋрЃўрЃќрЃЮрЃарЃў рЃљрЃЏрЃЮрЃўрЃдрЃћрЃЉрЃА рЃќрЃћрЃЊрЃЏрЃћрЃб рЃЉрЃџрЃЮрЃЎрЃћрЃЉрЃА рЃЊрЃљ рЃњрЃљрЃЊрЃљрЃАрЃфрЃћрЃЏрЃА рЃАрЃ«рЃЋрЃљрЃА.

Рєњ рЃљрЃАрЃћ RAM рЃЊрЃўрЃюрЃљрЃЏрЃўрЃЎрЃБрЃарЃљрЃЊ рЃюрЃљрЃгрЃўрЃџрЃЊрЃћрЃЉрЃљ,  
рЃЊрЃљ рЃАрЃћрЃарЃЋрЃћрЃарЃќрЃћ рЃљрЃа рЃљрЃарЃўрЃА рЃќрЃћрЃЊрЃЏрЃћрЃбрЃў рЃБрЃцрЃБрЃюрЃЦрЃфрЃўрЃЮ RAM рЃЊрЃљрЃЎрЃљрЃЋрЃћрЃЉрЃБрЃџрЃў.

рЃћрЃА рЃЎрЃћрЃЌрЃЊрЃћрЃЉрЃљ рЃАрЃърЃћрЃфрЃўрЃљрЃџрЃБрЃарЃў Рђъballoon driverРђю-рЃўрЃЌ,  
рЃарЃЮрЃЏрЃћрЃџрЃўрЃф VM-рЃўрЃА рЃерЃўрЃњрЃюрЃўрЃЌ рЃљрЃЕрЃћрЃюрЃА рЃЌрЃўрЃЌрЃЦрЃЮрЃА RAM рЃЊрЃљрЃўрЃЎрЃБрЃЏрЃерЃљ.

---

### ­ЪДЕ D. **Memory Deduplication (KSM РђЊ Kernel Same-page Merging)**

рЃЌрЃБ рЃЮрЃа VM-рЃерЃў рЃћрЃарЃЌрЃў рЃЊрЃљ рЃўрЃњрЃўрЃЋрЃћ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃўрЃљ (рЃЏрЃљрЃњ. OS-рЃўрЃА DLL рЃљрЃю shared library),  
рЃ░рЃўрЃърЃћрЃарЃЋрЃўрЃќрЃЮрЃарЃў рЃљрЃЏрЃЮрЃўрЃфрЃюрЃЮрЃЉрЃА рЃљрЃЏ рЃўрЃЊрЃћрЃюрЃбрЃБрЃа рЃњрЃЋрЃћрЃарЃЊрЃћрЃЉрЃА рЃЊрЃљ рЃўрЃюрЃљрЃ«рЃљрЃЋрЃА рЃћрЃарЃЌ рЃљрЃАрЃџрЃА.

> рЃерЃћрЃЊрЃћрЃњрЃў: рЃарЃћрЃљрЃџрЃБрЃарЃў RAM рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃљ рЃЏрЃфрЃўрЃарЃЊрЃћрЃЉрЃљ, рЃўрЃќрЃарЃЊрЃћрЃЉрЃљ рЃћрЃцрЃћрЃЦрЃбрЃБрЃарЃЮрЃЉрЃљ.

---

## ­Ъћ╣ 5№ИЈРЃБ Paging рЃЊрЃљ Swapping

рЃЌрЃБ RAM рЃњрЃљрЃЊрЃљрЃЋрЃАрЃћрЃЉрЃБрЃџрЃўрЃљ,  
рЃ░рЃўрЃърЃћрЃарЃЋрЃўрЃќрЃЮрЃарЃў рЃљрЃю Guest OS рЃўрЃДрЃћрЃюрЃћрЃЉрЃА **swap рЃцрЃљрЃўрЃџрЃА** рЃљрЃю **pagefile-рЃА**  
Рєњ рЃюрЃљрЃЎрЃџрЃћрЃЉрЃљрЃЊ рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃБрЃџрЃў рЃњрЃЋрЃћрЃарЃЊрЃћрЃЉрЃў рЃњрЃљрЃЊрЃљрЃЊрЃўрЃА рЃЊрЃўрЃАрЃЎрЃќрЃћ.

рЃћрЃА рЃюрЃћрЃџрЃў рЃърЃарЃЮрЃфрЃћрЃАрЃўрЃљ, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃўрЃфрЃљрЃЋрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃА out-of-memory рЃЦрЃфрЃћрЃЋрЃўрЃАрЃњрЃљрЃю.

---

## ­ЪДЕ 6№ИЈРЃБ рЃерЃћрЃ»рЃљрЃЏрЃћрЃЉрЃљ

|рЃЏрЃћрЃЦрЃљрЃюрЃўрЃќрЃЏрЃў|рЃЏрЃўрЃќрЃљрЃюрЃў|рЃљрЃдрЃгрЃћрЃарЃљ|
|---|---|---|
|**Shadow Page Table**|рЃўрЃќрЃЮрЃџрЃљрЃфрЃўрЃљ|VM memory mapping рЃ░рЃўрЃърЃћрЃарЃЋрЃўрЃќрЃЮрЃарЃўрЃА рЃЏрЃўрЃћрЃа|
|**EPT/NPT**|рЃАрЃўрЃЕрЃЦрЃљрЃарЃћ|hardware-level рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА рЃЌрЃљрЃарЃњрЃЏрЃюрЃљ|
|**Ballooning**|рЃЏрЃЮрЃЦрЃюрЃўрЃџрЃЮрЃЉрЃљ|рЃюрЃљрЃЎрЃџрЃћрЃЉрЃљрЃЊ рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃБрЃџрЃў RAM-рЃўрЃА рЃЊрЃљрЃЉрЃарЃБрЃюрЃћрЃЉрЃљ|
|**Deduplication (KSM)**|рЃЮрЃърЃбрЃўрЃЏрЃўрЃќрЃљрЃфрЃўрЃљ|рЃўрЃЊрЃћрЃюрЃбрЃБрЃарЃў рЃњрЃЋрЃћрЃарЃЊрЃћрЃЉрЃўрЃА рЃњрЃљрЃћрЃарЃЌрЃўрЃљрЃюрЃћрЃЉрЃљ|
|**Swap/Paging**|рЃњрЃљрЃЊрЃљрЃарЃЕрЃћрЃюрЃљ|RAM-рЃўрЃА рЃЊрЃўрЃАрЃЎрЃќрЃћ рЃњрЃљрЃЊрЃљрЃбрЃљрЃюрЃљ рЃњрЃљрЃЊрЃљрЃЋрЃАрЃћрЃЉрЃўрЃАрЃљрЃА|

---

## ­Ъћ╣ 7№ИЈРЃБ рЃърЃљрЃарЃљрЃџрЃћрЃџрЃў CPU-рЃАрЃЌрЃљрЃю

|рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃў|CPU Virtualization|Memory Virtualization|
|---|---|---|
|рЃарЃћрЃАрЃБрЃарЃАрЃў|CPU рЃЉрЃўрЃарЃЌрЃЋрЃћрЃЉрЃў|RAM рЃЉрЃџрЃЮрЃЎрЃћрЃЉрЃў|
|рЃЏрЃћрЃЦрЃљрЃюрЃўрЃќрЃЏрЃў|Time Slicing|Address Mapping|
|рЃўрЃќрЃЮрЃџрЃљрЃфрЃўрЃљ|Context Switch|Page Tables / EPT|
|overcommit|рЃЏрЃћрЃб VM рЃЋрЃўрЃЊрЃарЃћ рЃЉрЃўрЃарЃЌрЃЋрЃў|рЃЏрЃћрЃб VM рЃЋрЃўрЃЊрЃарЃћ RAM|
|рЃЏрЃўрЃќрЃљрЃюрЃў|рЃћрЃарЃЌрЃЊрЃарЃЮрЃБрЃџрЃў рЃерЃћрЃАрЃарЃБрЃџрЃћрЃЉрЃљ|рЃћрЃарЃЌрЃЊрЃарЃЮрЃБрЃџрЃў рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА рЃњрЃљрЃюрЃљрЃгрЃўрЃџрЃћрЃЉрЃљ|

---

­ЪДЕ **рЃЏрЃЮрЃЎрЃџрЃћрЃЊ:**

> CPU-рЃА рЃЊрЃарЃЮрЃА рЃЋрЃДрЃЮрЃцрЃЌ рЃЊрЃарЃЮрЃерЃў.  
> RAM-рЃА рЃЎрЃў рЃЋрЃДрЃЮрЃцрЃЌ рЃАрЃўрЃЋрЃарЃфрЃћрЃерЃў Рђћ рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃћрЃЉрЃўрЃА рЃљрЃЉрЃАрЃбрЃарЃљрЃЦрЃфрЃўрЃўрЃА рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃўрЃЌ.
